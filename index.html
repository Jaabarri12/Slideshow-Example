<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.60.0/phaser.js" 
    integrity="sha512-H05oT7BAjM9Ai1IaFX9zr61NtE2e1P0MkTz3AZXBnseaJSAOt2FGMFJ+vVGutaJxEGA1jxUiYsTBYQNE08/Erw==" 
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>

        class Scene0 extends Phaser.Scene {
            constructor (){
                super({key: 'Scene0'});
            }

            create()
            {
                this.input.once('pointerdown', function () 
                {
                    this.scene.start('sceneA');
                }, this);
            }
        }

        class SceneA extends Phaser.Scene {
            constructor () {
                super({key: 'sceneA'});
            }

            preload()
            {
                this.load.image('quackStudio', 'assets/pics/duck.png');
                this.load.audio('quack', ['assets/audio/quack.mp3']);
            }

            create()
            {

                this.load.audio('boom','assets/audio/boom.mp3');
                this.load.image('mountainL', 'assets/pics/mountainL.png');
                this.load.image('mountainM', 'assets/pics/mountainM.png');
                this.load.image('mountainR', 'assets/pics/mountainR.png');
                this.loadingDone = new Promise(resolve => this.load.on(Phaser.Loader.Events.COMPLETE, () => resolve()))
                this.load.start()

                const duck = this.add.image((window.innerWidth)/2,(window.innerHeight)/2,'quackStudio'); // Adds Duck image in game
                // Duck Height/Width
                duck.displayWidth = 1668/2;
                duck.displayHeight = 2388/2;

                // Audio that will play when the image loads
                let audio = this.sound.add('quack');
                audio.play();

                // this.cameras.main.once('camerafadeincomplete', function (camera){
                //     camera.fadeOut(2000);
                // })

                this.cameras.main.fadeIn(2000);
                
                this.input.keyboard.once('keydown-SPACE', () => {
		            // fade to black
		            this.cameras.main.fadeOut(1000, 0, 0, 0)
	            })

	            this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE, (cam, effect) => {
		            this.loadingDone.then(() => this.scene.start('sceneB'))
	            })
            }
        }

        class SceneB extends Phaser.Scene {
            constructor () {
                super({key: 'sceneB'});
            }
            
            preload() 
            {
            }

            create (){


                this.cameras.main.fadeIn(1000,0,0,0);
                //250 constant
                const mountainL = this.add.image((window.innerWidth)/2,(window.innerHeight)+500,'mountainL');
                const mountainM = this.add.image((window.innerWidth)/2, (window.innerHeight)+1500, 'mountainM');
                const mountainR = this.add.image((window.innerWidth)/2,(window.innerHeight)+1000, 'mountainR');

                let audio = this.sound.add('boom');
                audio.play();

            this.tweens.add({
                targets: mountainL,
                y: 500,
                duration: 1000,
                ease: 'cubic.in'
        });

            this.tweens.add({
                targets: mountainR,
                y: 500,
                duration: 1400,
                ease: 'cubic.in'
        });

            this.tweens.add({
                targets: mountainM,
                y: 500,
                duration: 1750,
                ease: 'cubic.in'
        });

            }
        }

 

        

        let game = new Phaser.Game({
            width: window.innerWidth,
            height: window.innerHeight,
            scene: [Scene0, SceneA, SceneB],
            backgroundColor: 0xFFFFFF
        });
    </script>
</head>
<body>
    
</body>
</html>